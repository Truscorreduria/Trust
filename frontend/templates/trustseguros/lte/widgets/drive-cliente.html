{% load datatables %}
<style type="text/css">
    .fileContainer {
        margin: 0 5px;
        height: 25px;
        width: 50px;
        overflow: hidden;
        background-color: #51972d;
        color: white;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 2px 0 0;
    }

    .fileContainer:active {
        box-shadow: none;
    }

    .fileContainer [type=file] {
        cursor: inherit;
        filter: alpha(opacity=0);
        opacity: 0;
        position: absolute;
        right: 0;
        text-align: right;
        top: 0;
    }
</style>
<table class="table">
    <thead>
    <tr>
        <th>Nombre del archivo</th>
        <th>Usuario</th>
        <th>Última modificación</th>
        <th>Fecha de caducidad</th>
        <th style="display: flex; flex-wrap: nowrap; justify-content: center">
            <label class="fileContainer">
                <i class="fa fa-upload"></i>
                <input id="{{ widget.name }}-files" type="file" multiple="multiple"/>
            </label>
        </th>
    </tr>
    </thead>

    <tbody id="{{ widget.name }}-list">
    {% for file in widget.value %}
        <tr>
            <td style="display: flex; align-items: center">
                <a href="{{ file.instance.archivo.url }}" target="_blank" style="margin-right: 10px"><i class="fa fa-eye"></i></a>
                {{ file.tipo_doc|as_inline_field }}  </td>
            <td>{{ file.instance.created_user }}</td>
            <td>{{ file.instance.updated }}</td>
            <td>
                <input type="text" class="form-control dateinput" name="fecha_caducidad"
                        {% if file.instance.fecha_caducidad %}
                       value="{{ file.instance.fecha_caducidad|date:'d/m/Y' }}" {% endif %}
                       data-id="{{ file.instance.id }}">
            </td>
            <td style="text-align: center;">
                <button type="button" class="btn btn-danger btn-table-delete" data-id="{{ file.instance.id }}"
                        data-app="backend" data-model="archivo">
                    <span class="fa fa-trash"></span>
                </button>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>