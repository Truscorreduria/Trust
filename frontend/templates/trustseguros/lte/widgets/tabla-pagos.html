{% load humanize %}

<input type="hidden" name="total_pagos" id="id_total_pagos" {% if widget.value %}
       value="{{ widget.value.total_pagos }}" {% endif %}>

<table class="table" id="id_{{ widget.name }}">
    <thead>
    <tr>
        <th>Cuotas</th>
        <th>Fecha vencimiento</th>
        <th>Importe</th>
        <th>Estado</th>
    </tr>
    </thead>
    <tbody>
    {% for fila in widget.value.pagos %}
        <tr>
            <td>
                <input type="hidden" name="{{ widget.name }}_id" value="{{ fila.id }}">
                <input type="text" name="{{ widget.name }}_numero" class="form-control" readonly
                       value="{{ fila.numero }}">
            </td>
            <td>
                <input type="text" name="{{ widget.name }}_fecha_vence" class="form-control" readonly
                       value="{{ fila.fecha_vence|date:'d/m/Y' }}">
            </td>
            <td>
                <input type="text" name="{{ widget.name }}_monto" class="form-control"
                       {% ifnotequal widget.value.estado_poliza 0 %} readonly {% endifnotequal %}
                       value="{{ fila.monto }}">
            </td>
            <td>
                <input type="text" name="{{ widget.name }}_estado" class="form-control" readonly
                       value="{{ fila.get_estado_display }}">
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>