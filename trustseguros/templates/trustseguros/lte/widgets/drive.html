<style type="text/css">
    .fileContainer {
        overflow: hidden;
        margin: 0;
        height: 25px;
        background-color: #51972d;
        color: white;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 2px 0 0;
    }

    .fileContainer:active {
        box-shadow: none;
    }

    .fileContainer [type=file] {
        cursor: inherit;
        display: block;
        font-size: 999px;
        filter: alpha(opacity=0);
        min-height: 100%;
        min-width: 100%;
        opacity: 0;
        position: absolute;
        right: 0;
        text-align: right;
        top: 0;
    }
</style>

<table class="table">
    <thead>
    <tr>
        <th>Nombre del archivo</th>
        <th>Usuario</th>
        <th>Última modificación</th>
        <th>Tamaño</th>
        <th>
            <label class="fileContainer">
                <i class="fa fa-upload"></i>
                <input id="files" type="file"/>
            </label>
        </th>
    </tr>
    </thead>

    <tbody id="{{ widget.name }}-list">
    {% for file in widget.value.media_files %}
        <tr>
            <td>{{ file.name }}</td>
            <td>{{ file.created_user }}</td>
            <td>{{ file.updated }}</td>
            <td>{{ file.size }}</td>
            <td></td>
        </tr>
    {% endfor %}
    </tbody>
</table>


<script type="text/javascript">
    $(document).ready(function () {
        function uploadFile(file) {
            data = new FormData();
            data.append('file', file);
            data.append('new', 'new');
            data.append('app_label', original.app_label);
            data.append('model', original.model);
            data.append('id', original.id);
            $.ajax("{% url 'trustseguros:documentos' %}", {
                type: "POST",
                data: data,
                processData: false,
                contentType: false,
                success: function (response) {
                    $('#file-list').append(response);
                }
            })
        }

        $(document).on('change', '#files', function () {
            $.each(this.files, function (i, o) {
                uploadFile(o);
            })
        });
    })
</script>